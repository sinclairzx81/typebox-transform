"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateYrel = void 0;
const processYrel_1 = require("./processYrel");
const getIssues = (item) => {
    return [
        ...((item.errors.length > 0) ? [{ key: item.key, errors: item.errors }] : []),
        ...item.children.reduce((total, item) => [...total, ...getIssues(item)], [])
    ];
};
const validateYrel = (schema, data, options) => {
    const { rootKey = '' } = { ...options };
    const tree = (0, processYrel_1.processYrel)(schema, data, { key: rootKey });
    const isValid = tree.isValid;
    if (isValid) {
        return { isValid, issues: [], data: tree.data };
    }
    return { isValid, issues: getIssues(tree), data: undefined };
};
exports.validateYrel = validateYrel;
