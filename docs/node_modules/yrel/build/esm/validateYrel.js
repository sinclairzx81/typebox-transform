import { processYrel } from "./processYrel.js";
const getIssues = (item) => {
    return [
        ...((item.errors.length > 0) ? [{ key: item.key, errors: item.errors }] : []),
        ...item.children.reduce((total, item) => [...total, ...getIssues(item)], [])
    ];
};
const validateYrel = (schema, data, options) => {
    const { rootKey = '' } = { ...options };
    const tree = processYrel(schema, data, { key: rootKey });
    const isValid = tree.isValid;
    if (isValid) {
        return { isValid, issues: [], data: tree.data };
    }
    return { isValid, issues: getIssues(tree), data: undefined };
};
export { validateYrel };
