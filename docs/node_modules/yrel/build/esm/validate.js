import { processSchema } from "./processSchema.js";
const getIssues = (item) => {
    return [
        ...((item.errors.length > 0) ? [{ key: item.key, errors: item.errors }] : []),
        ...item.children.reduce((total, item) => [...total, ...getIssues(item)], [])
    ];
};
const validate = (schema, data, options) => {
    const { rootKey = '' } = { ...options };
    const tree = processSchema(schema, data, { key: rootKey });
    const isValid = tree.isValid;
    const result = isValid ? data : undefined;
    return { isValid, issues: getIssues(tree), data: result };
};
export { validate };
